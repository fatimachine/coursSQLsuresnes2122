<!-- Démarrage SQL : repos sur OS (C:) -->

<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <link rel="icon" type="image/png" href="img/IMG-8090.JPG" />

    <title>Cours SQL - Requetes de jointure - 4</title>

    <link rel="stylesheet" href="css/styles.css">
</head>

<body>

    <header class="container mt-4 p-4 bg-white">
        <div class="row">
            <div class="col-12 text-center">
                <h1 class="display-4 text-dark">Cours SQL - Requetes de jointures- # 4</h1>
                <p class="lead">Base de données pour PHP Bibliothèques</p>
            </div>
        </div>
        <!-- fin row  -->
    </header>



    <section class="container mb-4 bg-white">
        <div class="row">
       <h2>1/Définition</h2>
       <dl>
           <dt>Les jointures</dt>
           <dd>Les jointures permettent, comme les requêtes imbriquées d'effectuer les requêtes sur plusieurs tables.Il faut un champ commun aux différents tables.L'avantage des jointures est que l'on peut obtenir un résultat final des colonnes ou champs issus de plusieurs tables différents.</dd>
       </dl>
       <div class="col-md-6">
           <h3>Récap</h3>
           <h4>a/Jointures</h4>
           <ul>
               <li><code>SELECT</code>: liste des champs que je souhaite afficher dans mon résultat</li>
               <li><code>FROM</code>: de quelle table cela provient-il ?</li>
               <li><code>WHERE</code>: condition de jointure pour assurer le croisment des données</li>
               <li><code>AND / OR</code>: autre condition éventuelle</li>
           </ul>
       </div>
       <!-- fin col -->
       <div class="col-md-6">
           <h3>2/Exemples:</h3>
           <ul>
               <li>Dans la BDD bibliothèque; afficher les dates auxquelles Guillaume s'est rendu  à la bibliothèque pour emprunter ou rendre un livre, on a besoin de 3 colonnes, le prénom, la date de sortie et la date de rendu : <br><code>SELECT abonne.prenom, emprunt.date_sortie, emprunt.date_rendu FROM abonne,emprunt WHERE abonne.id_abonne = emprunt.id_abonne AND abonne.prenom = 'Guillaume';</code> <br></li>
      
               <li>Qui a emprunté le livre Une vie en 2014 :<code>SELECT abonne.prenom FROM abonne, emprunt, livre WHERE livre.id_livre = emprunt.id_livre AND emprunt.id_abonne AND emprunt.id_abonne = abonne.id_abonne AND livre.titre = 'Une Vie'AND emprunt.date_sortie LIKE '2014%';</code></li>
               <li class="alert alert-secondary text-white">La même requête avec des préfixes :<code>SELECT a.prenom,e.date_sortie, e.date_rendu FROM abonne a, emprunt e WHERE a.id_abonne = e.id_abonne AND a.prenom = 'Guillaume';</code></li>
               <li>Le nombre de livres empruntés par chaque abonné :<code>SELECT abonne.prenom, COUNT(emprunt.id_livre) AS 'nombre de livres empruntés' FROM abonne, emprunt WHERE abonne.id_abonne = emprunt.id_abonne GROUP BY emprunt.id_abonne;</code></li>
               <li>Qui a emprunté quoi et quand :<code>SELECT abonne.prenom, livre.titre, emprunt.date_sortie <br>
                FROM abonne, livre, emprunt WHERE abonne.id_abonne = emprunt.id_abonne <br>
                AND livre.id_livre = emprunt.id_livre <br>
                ORDER BY abonne.prenom ASC; <br>
            </code></li>
            <li class="alert alert-secondary text-white">La même requête avec des préfixes :<code>SELECT a.prenom, l.titre, e.date_sortie FROM abonne a, livre l, emprunt e WHERE a.id_abonne = e.id_abonne AND l.id_livre = e.id_livre ORDER BY a.prenom ASC;</code></li>

               <li>Afficher le prénom des abonnés avec l'id des livres qu'ils ont empruntés : <code>SELECT abonne.prenom, emprunt.id_livre FROM abonne, emprunt WHERE abonne.id_abonne = emprunt.id_abonne;</code></li>

               <li class="alert alert-secondary text-white">La même requête avec des préfixes :<code>SELECT ab.prenom, em.id_livre FROM abonne ab, emprunt em WHERE ab.id_abonne = em.id_abonne;</code></li>
               <li>Afficher dans une requête <code></code></li>
           </ul>
       </div>
<!--        fin col -->
<div class="col-md-6">
    <h3> b/Jointures externes</h3>
    <ul>
        <li>Afficher le prénom des abonnés avec le numéro des livres qu'ils ont empruntés :<code>SELECT abonne.prenom, emprunt.id_livre FROM abonne LEFT JOIN emprunt ON abonne.id_abonne = emprunt.id_abonne;</code> Select nous sélectionne le champ prenom et id_livre  FROM et LEFT JOIN la table placée à gauche de l'expression LEFT JOIN (la table abonne) sera la tbale dont tous les résultats seront rapatriés (sans correpondance exigée dans l'autre table) <br> On la condition de fait par le mot clef ON et non plus WHERE, dans le cadre d'une requête LEFT JOIN ou RIGHT JOIN (FULL JOIN n'est pas valable en SQL)</li>
        <li><code></code></li>
    </ul>

 
</div>
<div class="col-md-6">
           
    <h3>c/Union</h3>
<p>Il est possible de fusionner 2 résultats en 1 seul grâce au mot-clef UNION</p>
<h4>Exemples:</h4>
    <ul>
        <li>Nous fusionons la liste d'abonnés avec la liste des auteurs, UNION comme DISTINCT  :<code>SELECT auteur AS 'nom des personnes physiques' <br> FROM livre <br> UNION <br> SELECT prenom <br> FROM abonne;</code></li>
        <li><code></code></li>
        <li><code></code></li>
        <li><code></code></li>


    </ul>
</div>
        </div>
       

        <!-- fin row -->
      

    </section>
    <!-- fin container -->

    <div class="p-2 mx-2">
        <footer class="text-center text-lg-start bg-jaune">

            <!-- Copyright -->
            <div class="text-center text-white p-5 m-5" style="background-color: mistyrose;">
                &copy; Colombbus 2021-2022 : FATIMA
              </div>
        </footer>
    </div>
    <!-- Optional JavaScript -->
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
        crossorigin="anonymous"></script>
</body>

</html>